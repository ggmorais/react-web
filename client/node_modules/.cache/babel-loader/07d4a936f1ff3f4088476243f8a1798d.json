{"ast":null,"code":"import _slicedToArray from \"D:\\\\Programing\\\\react\\\\react-web\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Programing\\\\react\\\\react-web\\\\client\\\\src\\\\components\\\\Home\\\\Main\\\\Post.js\";\nimport React from 'react';\nimport $ from 'jquery';\nimport config from '../../config';\nimport Commentary from './Commentary';\nimport NewCommentary from './NewCommentary';\nimport like from '../../assets/img_like.png';\nimport dislike from '../../assets/img_dislike.png';\nimport textareaAutoHeight from '../../tools/textareaAutoHeight';\nexport default (props => {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        commentaries = _React$useState2[0],\n        setCommentaries = _React$useState2[1];\n\n  const _React$useState3 = React.useState(false),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        deleted = _React$useState4[0],\n        setDeleted = _React$useState4[1];\n\n  const _React$useState5 = React.useState('100px'),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        divHeight = _React$useState6[0],\n        setDivHeight = _React$useState6[1];\n\n  var date = props.date.split(' '); // 0 = day in week\n  // 1 = mouth\n  // 2 = day in number\n  // 3 = year\n  // 4 = exact time\n  // 5 = gmt stuff\n  // var date = date[4].substr(0, 2) + 'h ' + date[4].substr(3, 2) + 'm '\n\n  var date = date[4].substr(0, 5) + ' ' + date[0];\n  React.useEffect(() => {\n    // textareaAutoHeight('.NewCommentary')\n    getCommentaries();\n  }, []);\n\n  function getCommentaries() {\n    console.log('Getting commentaries ...');\n    $.get(\"\".concat(config.api, \"/getCommentaries\"), {\n      _id: props._id\n    }, r => {\n      console.log(r);\n      setCommentaries(Object.values(r).map(r => React.createElement(Commentary, {\n        key: r._id,\n        infos: r,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      })));\n    });\n  }\n\n  function deletePost() {\n    $.post(\"\".concat(config.api, \"/deletePost\"), {\n      _id: props._id\n    }, r => {\n      //setDeleted(true)\n\n      /*\r\n      padding: 60px;\r\n      text-align: center;\r\n      color: #ef3447;\r\n      font-size: 25px;\r\n      */\n      var id = '#' + props._id;\n      var element = React.createElement(\"p\", {\n        style: {\n          padding: '60px',\n          textAlign: 'center',\n          color: '#ef3447',\n          fontSize: '25px',\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"Deleted\");\n      $(id).css('box-shadow', '0px 0px 4px #ef3447');\n      $(id).empty();\n      $(id).append(element); // setDeleted(true)\n    });\n  }\n\n  return (// <div className=\"Post\" id={props._id} style={{display: deleted ? 'none' : 'block'}}>\n    React.createElement(\"div\", {\n      className: \"Post\",\n      id: props._id,\n      style: {\n        MinHeight: divHeight\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        padding: '15px',\n        fontSize: '15px',\n        color: '#00000073'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      style: {\n        color: '#5c7ee9db'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, props.owner), \" posted at \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, date), props.username === JSON.parse(localStorage.getItem('@react-web/userInfos')).username ? React.createElement(\"a\", {\n      onClick: deletePost,\n      style: {\n        cursor: 'pointer',\n        float: 'right'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Delete\") : null), React.createElement(\"p\", {\n      style: {\n        marginLeft: '15px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, props.body), React.createElement(\"div\", {\n      className: \"Post-image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, props.image ? React.createElement(\"img\", {\n      src: \"\".concat(config.api, \"/public/images/\").concat(props.image),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }) : ''), React.createElement(\"div\", {\n      className: \"Post-actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: like,\n      className: \"img_actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: dislike,\n      className: \"img_actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"Commentaries\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Commentary-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, commentaries), React.createElement(\"div\", {\n      className: \"NewCommentary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(NewCommentary, {\n      _id: props._id,\n      getCommentaries: getCommentaries,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }))))\n  );\n});","map":{"version":3,"sources":["D:/Programing/react/react-web/client/src/components/Home/Main/Post.js"],"names":["React","$","config","Commentary","NewCommentary","like","dislike","textareaAutoHeight","props","useState","commentaries","setCommentaries","deleted","setDeleted","divHeight","setDivHeight","date","split","substr","useEffect","getCommentaries","console","log","get","api","_id","r","Object","values","map","deletePost","post","id","element","padding","textAlign","color","fontSize","display","css","empty","append","MinHeight","owner","username","JSON","parse","localStorage","getItem","cursor","float","marginLeft","body","image"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,kBAAP,MAA+B,gCAA/B;AAGA,gBAAeC,KAAK,IAAI;AAAA,0BAEkBR,KAAK,CAACS,QAAN,CAAe,EAAf,CAFlB;AAAA;AAAA,QAEfC,YAFe;AAAA,QAEDC,eAFC;;AAAA,2BAGQX,KAAK,CAACS,QAAN,CAAe,KAAf,CAHR;AAAA;AAAA,QAGfG,OAHe;AAAA,QAGNC,UAHM;;AAAA,2BAIYb,KAAK,CAACS,QAAN,CAAe,OAAf,CAJZ;AAAA;AAAA,QAIfK,SAJe;AAAA,QAIJC,YAJI;;AAMtB,MAAIC,IAAI,GAAGR,KAAK,CAACQ,IAAN,CAAWC,KAAX,CAAiB,GAAjB,CAAX,CANsB,CAOtB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAID,IAAI,GAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQE,MAAR,CAAe,CAAf,EAAkB,CAAlB,IAAuB,GAAvB,GAA6BF,IAAI,CAAC,CAAD,CAA5C;AAEAhB,EAAAA,KAAK,CAACmB,SAAN,CAAgB,MAAM;AACpB;AACAC,IAAAA,eAAe;AAChB,GAHD,EAGG,EAHH;;AAKA,WAASA,eAAT,GAA2B;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACArB,IAAAA,CAAC,CAACsB,GAAF,WAASrB,MAAM,CAACsB,GAAhB,uBAAuC;AAACC,MAAAA,GAAG,EAAEjB,KAAK,CAACiB;AAAZ,KAAvC,EAAyDC,CAAC,IAAI;AAC5DL,MAAAA,OAAO,CAACC,GAAR,CAAYI,CAAZ;AACAf,MAAAA,eAAe,CAACgB,MAAM,CAACC,MAAP,CAAcF,CAAd,EAAiBG,GAAjB,CAAqBH,CAAC,IACpC,oBAAC,UAAD;AAAY,QAAA,GAAG,EAAEA,CAAC,CAACD,GAAnB;AAAwB,QAAA,KAAK,EAAEC,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADc,CAAD,CAAf;AAGD,KALD;AAMD;;AAED,WAASI,UAAT,GAAsB;AACpB7B,IAAAA,CAAC,CAAC8B,IAAF,WAAU7B,MAAM,CAACsB,GAAjB,kBAAmC;AAACC,MAAAA,GAAG,EAAEjB,KAAK,CAACiB;AAAZ,KAAnC,EAAqDC,CAAC,IAAI;AACxD;;AACA;;;;;;AAMA,UAAIM,EAAE,GAAG,MAAMxB,KAAK,CAACiB,GAArB;AACA,UAAIQ,OAAO,GAAG;AAAG,QAAA,KAAK,EAAE;AACtBC,UAAAA,OAAO,EAAE,MADa;AAEtBC,UAAAA,SAAS,EAAE,QAFW;AAGtBC,UAAAA,KAAK,EAAE,SAHe;AAItBC,UAAAA,QAAQ,EAAE,MAJY;AAKtBC,UAAAA,OAAO,EAAE;AALa,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAd;AASArC,MAAAA,CAAC,CAAC+B,EAAD,CAAD,CAAMO,GAAN,CAAU,YAAV,EAAwB,qBAAxB;AACAtC,MAAAA,CAAC,CAAC+B,EAAD,CAAD,CAAMQ,KAAN;AACAvC,MAAAA,CAAC,CAAC+B,EAAD,CAAD,CAAMS,MAAN,CAAaR,OAAb,EApBwD,CAsBxD;AAID,KA1BD;AA2BD;;AAED,SACE;AACA;AAAK,MAAA,SAAS,EAAC,MAAf;AAAsB,MAAA,EAAE,EAAEzB,KAAK,CAACiB,GAAhC;AAAqC,MAAA,KAAK,EAAE;AAACiB,QAAAA,SAAS,EAAE5B;AAAZ,OAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,KAAK,EAAE;AAACoB,QAAAA,OAAO,EAAE,MAAV;AAAkBG,QAAAA,QAAQ,EAAE,MAA5B;AAAoCD,QAAAA,KAAK,EAAE;AAA3C,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,KAAK,EAAE;AAACA,QAAAA,KAAK,EAAE;AAAR,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiC5B,KAAK,CAACmC,KAAvC,CADF,iBAC8D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI3B,IAAJ,CAD9D,EAEGR,KAAK,CAACoC,QAAN,KAAmBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,sBAArB,CAAX,EAAyDJ,QAA5E,GAAuF;AAAG,MAAA,OAAO,EAAEd,UAAZ;AAAwB,MAAA,KAAK,EAAE;AAACmB,QAAAA,MAAM,EAAE,SAAT;AAAoBC,QAAAA,KAAK,EAAE;AAA3B,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAvF,GAAwK,IAF3K,CADF,EAKE;AAAG,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiC3C,KAAK,CAAC4C,IAAvC,CALF,EAME;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG5C,KAAK,CAAC6C,KAAN,GAAc;AAAK,MAAA,GAAG,YAAKnD,MAAM,CAACsB,GAAZ,4BAAiChB,KAAK,CAAC6C,KAAvC,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAd,GAA2E,EAD9E,CANF,EASE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,GAAG,EAAEhD,IAAV;AAAgB,MAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAK,MAAA,GAAG,EAAEC,OAAV;AAAmB,MAAA,SAAS,EAAC,aAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CATF,EAaE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGI,YADH,CADF,EAIE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,aAAD;AAAe,MAAA,GAAG,EAAEF,KAAK,CAACiB,GAA1B;AAA+B,MAAA,eAAe,EAAEL,eAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAJF,CAbF;AAFF;AA0BD,CAvFD","sourcesContent":["import React from 'react'\r\nimport $ from 'jquery'\r\nimport config from '../../config'\r\nimport Commentary from './Commentary'\r\nimport NewCommentary from './NewCommentary'\r\nimport like from '../../assets/img_like.png'\r\nimport dislike from '../../assets/img_dislike.png'\r\nimport textareaAutoHeight from '../../tools/textareaAutoHeight'\r\n\r\n\r\nexport default props => {\r\n\r\n  const [commentaries, setCommentaries] = React.useState([])\r\n  const [deleted, setDeleted] = React.useState(false)\r\n  const [divHeight, setDivHeight] = React.useState('100px')\r\n\r\n  var date = props.date.split(' ');\r\n  // 0 = day in week\r\n  // 1 = mouth\r\n  // 2 = day in number\r\n  // 3 = year\r\n  // 4 = exact time\r\n  // 5 = gmt stuff\r\n  // var date = date[4].substr(0, 2) + 'h ' + date[4].substr(3, 2) + 'm '\r\n  var date = date[4].substr(0, 5) + ' ' + date[0]\r\n\r\n  React.useEffect(() => {\r\n    // textareaAutoHeight('.NewCommentary')\r\n    getCommentaries()\r\n  }, [])\r\n\r\n  function getCommentaries() {\r\n    console.log('Getting commentaries ...')\r\n    $.get(`${config.api}/getCommentaries`, {_id: props._id}, r => {\r\n      console.log(r)\r\n      setCommentaries(Object.values(r).map(r => (\r\n        <Commentary key={r._id} infos={r} />\r\n      )))\r\n    })\r\n  }\r\n\r\n  function deletePost() {\r\n    $.post(`${config.api}/deletePost`, {_id: props._id}, r => {\r\n      //setDeleted(true)\r\n      /*\r\n      padding: 60px;\r\n      text-align: center;\r\n      color: #ef3447;\r\n      font-size: 25px;\r\n      */\r\n      var id = '#' + props._id\r\n      var element = <p style={{\r\n        padding: '60px',\r\n        textAlign: 'center',\r\n        color: '#ef3447',\r\n        fontSize: '25px',\r\n        display: 'block'\r\n        }}>\r\n        Deleted</p>\r\n\r\n      $(id).css('box-shadow', '0px 0px 4px #ef3447')\r\n      $(id).empty()\r\n      $(id).append(element)\r\n\r\n      // setDeleted(true)\r\n\r\n      \r\n\r\n    })\r\n  }\r\n\r\n  return (\r\n    // <div className=\"Post\" id={props._id} style={{display: deleted ? 'none' : 'block'}}>\r\n    <div className=\"Post\" id={props._id} style={{MinHeight: divHeight}} >\r\n      <p style={{padding: '15px', fontSize: '15px', color: '#00000073'}}>\r\n        <b style={{color: '#5c7ee9db'}}>{props.owner}</b> posted at <b>{date}</b>\r\n        {props.username === JSON.parse(localStorage.getItem('@react-web/userInfos')).username ? <a onClick={deletePost} style={{cursor: 'pointer', float: 'right'}}>Delete</a> : null}\r\n      </p>\r\n      <p style={{marginLeft: '15px'}}>{props.body}</p>\r\n      <div className=\"Post-image\">\r\n        {props.image ? <img src={`${config.api}/public/images/${props.image}`} /> : ''}\r\n      </div>\r\n      <div className=\"Post-actions\">\r\n        <img src={like} className=\"img_actions\"/>\r\n        <img src={dislike} className=\"img_actions\"/>\r\n      </div>\r\n      <div className=\"Commentaries\">\r\n        <div className=\"Commentary-list\">\r\n          {commentaries}\r\n        </div>\r\n        <div className=\"NewCommentary\">\r\n          <NewCommentary _id={props._id} getCommentaries={getCommentaries} />\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}