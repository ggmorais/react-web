{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\gmorais\\\\Documents\\\\react-web\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:\\\\Users\\\\gmorais\\\\Documents\\\\react-web\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\gmorais\\\\Documents\\\\react-web\\\\client\\\\src\\\\components\\\\Home\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport $ from 'jquery';\nimport Header from '../Header';\nimport Post from './Post';\nimport NewPost from './NewPost';\nimport './master.css';\nimport Form from '../Login/Form';\nexport default (props => {\n  React.useEffect(() => {\n    if (!localStorage.getItem('@react-web/auth')) {\n      props.history.push('/login');\n    } else {\n      getPosts();\n    }\n  }, []);\n  if (!localStorage.getItem('@react-web/auth')) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  });\n\n  const _React$useState = React.useState(JSON.parse(localStorage.getItem('@react-web/userInfos'))),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        userInfos = _React$useState2[0],\n        setUserInfos = _React$useState2[1];\n\n  const _React$useState3 = React.useState({\n    body: '',\n    image: ''\n  }),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        newPost = _React$useState4[0],\n        setNewPost = _React$useState4[1];\n\n  const _React$useState5 = React.useState([]),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        posts = _React$useState6[0],\n        setPosts = _React$useState6[1];\n\n  function handleNewPost(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    setNewPost(_objectSpread({}, newPost, {\n      [name]: e.target.files ? e.target.files[0] : value\n    }));\n  }\n\n  function handlePublish() {\n    if (Object.keys(newPost).length > 0) {\n      var form = new FormData();\n      form.append('image', newPost.image);\n      form.append('body', newPost.body);\n      form.append('username', userInfos.username);\n      form.append('owner', userInfos.firstName + ' ' + userInfos.lastName);\n      form.append('date', new Date());\n      $.ajax({\n        url: \"\".concat(config.api, \"/insertPost\"),\n        method: 'post',\n        data: form,\n        cache: false,\n        contentType: false,\n        processData: false,\n        success: r => {\n          if (r.done) {\n            setNewPost({\n              body: '',\n              image: ''\n            });\n            getPosts();\n          }\n        }\n      });\n    }\n  }\n\n  function getPosts(limit = null) {\n    console.log('Getting posts ...');\n    $.get(\"\".concat(props.api, \"/getPosts\"), r => {\n      setPosts(r.r.map(post => React.createElement(Post, {\n        key: post._id,\n        _id: post._id,\n        username: post.username,\n        owner: post.owner,\n        body: post.body,\n        image: post.image,\n        date: post.date,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })));\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Background bg_home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(Header, {\n    userInfos: userInfos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"PostViewer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(NewPost, {\n    handleNewPost: handleNewPost,\n    newPost: newPost,\n    handlePublish: handlePublish,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), posts));\n});","map":{"version":3,"sources":["C:/Users/gmorais/Documents/react-web/client/src/components/Home/index.js"],"names":["React","$","Header","Post","NewPost","Form","props","useEffect","localStorage","getItem","history","push","getPosts","useState","JSON","parse","userInfos","setUserInfos","body","image","newPost","setNewPost","posts","setPosts","handleNewPost","e","target","name","value","files","handlePublish","Object","keys","length","form","FormData","append","username","firstName","lastName","Date","ajax","url","config","api","method","data","cache","contentType","processData","success","r","done","limit","console","log","get","map","post","_id","owner","date"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport $ from 'jquery'\r\nimport Header from '../Header'\r\nimport Post from './Post'\r\nimport NewPost from './NewPost'\r\nimport './master.css'\r\nimport Form from '../Login/Form'\r\n\r\n\r\nexport default props => {\r\n  \r\n  React.useEffect(() => {\r\n    if (!localStorage.getItem('@react-web/auth')) {\r\n      props.history.push('/login')\r\n    } else {\r\n      getPosts()\r\n    }\r\n\r\n  }, [])\r\n  \r\n  if (!localStorage.getItem('@react-web/auth')) return <div/>\r\n\r\n  const [userInfos, setUserInfos] = React.useState(JSON.parse(localStorage.getItem('@react-web/userInfos')))\r\n  const [newPost, setNewPost] = React.useState({body: '', image: ''})\r\n  const [posts, setPosts] = React.useState([])\r\n\r\n  function handleNewPost(e) {\r\n    const {name, value} = e.target\r\n\r\n    setNewPost({\r\n      ...newPost,\r\n      [name]: e.target.files ? e.target.files[0] : value\r\n    })\r\n  }\r\n\r\n  function handlePublish() {\r\n    if (Object.keys(newPost).length > 0) {\r\n      var form = new FormData()\r\n      form.append('image', newPost.image)\r\n      form.append('body', newPost.body)\r\n      form.append('username', userInfos.username)\r\n      form.append('owner', userInfos.firstName + ' ' + userInfos.lastName)\r\n      form.append('date', new Date())\r\n      \r\n      $.ajax({\r\n        url: `${config.api}/insertPost`,\r\n        method: 'post',\r\n        data: form,\r\n        cache: false,\r\n        contentType: false,\r\n        processData: false,\r\n        success: r => {\r\n          if (r.done) {\r\n            setNewPost({body: '', image: ''})\r\n            getPosts()\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function getPosts(limit = null) {\r\n    console.log('Getting posts ...')\r\n\r\n    $.get(`${props.api}/getPosts`, r => {\r\n      setPosts(r.r.map(post => (\r\n        <Post key={post._id} _id={post._id} username={post.username} owner={post.owner} body={post.body} image={post.image} date={post.date} />\r\n      )))\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"Home\">\r\n      <div className=\"Background bg_home\"></div>\r\n      <Header userInfos={userInfos} />\r\n      <div className=\"PostViewer\">\r\n        <NewPost handleNewPost={handleNewPost} newPost={newPost} handlePublish={handlePublish} />\r\n        {posts}\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}