{"ast":null,"code":"import _defineProperty from \"D:\\\\Development\\\\react-web\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:\\\\Development\\\\react-web\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Development\\\\react-web\\\\client\\\\src\\\\components\\\\Home\\\\Main\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport $ from 'jquery';\nimport config from '../../config';\nimport Post from './Post';\nimport NewPost from './NewPost';\nimport './master.css';\nexport default (props => {\n  const _React$useState = React.useState({\n    body: '',\n    image: ''\n  }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        newPost = _React$useState2[0],\n        setNewPost = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        posts = _React$useState4[0],\n        setPosts = _React$useState4[1];\n\n  const _React$useState5 = React.useState([]),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        postsData = _React$useState6[0],\n        setPostsData = _React$useState6[1];\n\n  const userInfos = props.userInfos;\n  React.useEffect(() => {\n    getPosts();\n  }, []);\n\n  function handleNewPost(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    setNewPost(_objectSpread({}, newPost, {\n      [name]: e.target.files ? e.target.files[0] : value\n    }));\n  }\n\n  function handlePublish() {\n    if (Object.keys(newPost).length > 0) {\n      const form = new FormData();\n      form.append('image', newPost.image);\n      form.append('body', newPost.body);\n      form.append('username', userInfos.username);\n      form.append('owner', userInfos.firstName + ' ' + userInfos.lastName);\n      form.append('date', new Date());\n      $.ajax({\n        url: \"\".concat(config.api, \"/insertPost\"),\n        method: 'post',\n        data: form,\n        cache: false,\n        contentType: false,\n        processData: false,\n        success: r => {\n          if (r.done) {\n            setNewPost({\n              body: '',\n              image: ''\n            });\n            getPosts(1);\n          }\n        }\n      });\n    }\n  }\n\n  function getPosts(limit = 50, find = {}) {\n    console.log('Getting posts ...');\n    $.get(\"\".concat(config.api, \"/getPosts\"), {\n      limit: limit,\n      find: find\n    }, r => {\n      let oldData = postsData; //let clonedData = [...postsData];\n      //clonedData.push(r.r)\n      //let x = [...r.data]\n      //console.log(x)\n      //x.push({d: 666})\n\n      let y = [{\n        z: 124235,\n        y: 345345\n      }];\n      let x = [...z];\n      x.push(r);\n      console.log(x); //clonedData.push(r.r);\n      // console.log(clonedData)\n\n      /*setPostsData(clonedData[0])\r\n        console.log(clonedData[0])*/\n      // Merge if needed the old data with the new\n\n      /*if (!oldData) oldData = r.r\r\n      else Array.prototype.unshift.apply(oldData, r.r)\r\n      \r\n      // Remove duplicates\r\n      oldData = [...new Set(oldData)]\r\n        setPostsData(oldData)*/\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Home-Main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"PostViewer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(NewPost, {\n    handleNewPost: handleNewPost,\n    newPost: newPost,\n    handlePublish: handlePublish,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), postsData.length && postsData.map(post => React.createElement(Post, {\n    key: post._id,\n    _id: post._id,\n    username: post.username,\n    owner: post.owner,\n    body: post.body,\n    image: post.image,\n    date: post.date,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }))));\n});","map":{"version":3,"sources":["D:/Development/react-web/client/src/components/Home/Main/index.js"],"names":["React","$","config","Post","NewPost","props","useState","body","image","newPost","setNewPost","posts","setPosts","postsData","setPostsData","userInfos","useEffect","getPosts","handleNewPost","e","target","name","value","files","handlePublish","Object","keys","length","form","FormData","append","username","firstName","lastName","Date","ajax","url","api","method","data","cache","contentType","processData","success","r","done","limit","find","console","log","get","oldData","y","z","x","push","map","post","_id","owner","date"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAO,cAAP;AAGA,gBAAeC,KAAK,IAAI;AAAA,0BAEQL,KAAK,CAACM,QAAN,CAAe;AAACC,IAAAA,IAAI,EAAE,EAAP;AAAWC,IAAAA,KAAK,EAAE;AAAlB,GAAf,CAFR;AAAA;AAAA,QAEfC,OAFe;AAAA,QAENC,UAFM;;AAAA,2BAGIV,KAAK,CAACM,QAAN,CAAe,EAAf,CAHJ;AAAA;AAAA,QAGfK,KAHe;AAAA,QAGRC,QAHQ;;AAAA,2BAIYZ,KAAK,CAACM,QAAN,CAAe,EAAf,CAJZ;AAAA;AAAA,QAIfO,SAJe;AAAA,QAIJC,YAJI;;AAKtB,QAAMC,SAAS,GAAGV,KAAK,CAACU,SAAxB;AAEAf,EAAAA,KAAK,CAACgB,SAAN,CAAgB,MAAM;AACpBC,IAAAA,QAAQ;AACT,GAFD,EAEG,EAFH;;AAIA,WAASC,aAAT,CAAuBC,CAAvB,EAA0B;AAAA,sBACFA,CAAC,CAACC,MADA;AAAA,UACjBC,IADiB,aACjBA,IADiB;AAAA,UACXC,KADW,aACXA,KADW;AAGxBZ,IAAAA,UAAU,mBACLD,OADK;AAER,OAACY,IAAD,GAAQF,CAAC,CAACC,MAAF,CAASG,KAAT,GAAiBJ,CAAC,CAACC,MAAF,CAASG,KAAT,CAAe,CAAf,CAAjB,GAAqCD;AAFrC,OAAV;AAID;;AAED,WAASE,aAAT,GAAyB;AACvB,QAAIC,MAAM,CAACC,IAAP,CAAYjB,OAAZ,EAAqBkB,MAArB,GAA8B,CAAlC,EAAqC;AACnC,YAAMC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAD,MAAAA,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqBrB,OAAO,CAACD,KAA7B;AACAoB,MAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBrB,OAAO,CAACF,IAA5B;AACAqB,MAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBf,SAAS,CAACgB,QAAlC;AACAH,MAAAA,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqBf,SAAS,CAACiB,SAAV,GAAsB,GAAtB,GAA4BjB,SAAS,CAACkB,QAA3D;AACAL,MAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoB,IAAII,IAAJ,EAApB;AAEAjC,MAAAA,CAAC,CAACkC,IAAF,CAAO;AACLC,QAAAA,GAAG,YAAKlC,MAAM,CAACmC,GAAZ,gBADE;AAELC,QAAAA,MAAM,EAAE,MAFH;AAGLC,QAAAA,IAAI,EAAEX,IAHD;AAILY,QAAAA,KAAK,EAAE,KAJF;AAKLC,QAAAA,WAAW,EAAE,KALR;AAMLC,QAAAA,WAAW,EAAE,KANR;AAOLC,QAAAA,OAAO,EAAEC,CAAC,IAAI;AACZ,cAAIA,CAAC,CAACC,IAAN,EAAY;AACVnC,YAAAA,UAAU,CAAC;AAACH,cAAAA,IAAI,EAAE,EAAP;AAAWC,cAAAA,KAAK,EAAE;AAAlB,aAAD,CAAV;AACAS,YAAAA,QAAQ,CAAC,CAAD,CAAR;AACD;AACF;AAZI,OAAP;AAcD;AACF;;AAGD,WAASA,QAAT,CAAkB6B,KAAK,GAAG,EAA1B,EAA8BC,IAAI,GAAG,EAArC,EAAyC;AACvCC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AAEAhD,IAAAA,CAAC,CAACiD,GAAF,WAAShD,MAAM,CAACmC,GAAhB,gBAAgC;AAACS,MAAAA,KAAK,EAAEA,KAAR;AAAeC,MAAAA,IAAI,EAAEA;AAArB,KAAhC,EAA4DH,CAAC,IAAI;AAC/D,UAAIO,OAAO,GAAGtC,SAAd,CAD+D,CAG/D;AACA;AAEA;AACA;AACA;;AACA,UAAIuC,CAAC,GAAG,CAAC;AAACC,QAAAA,CAAC,EAAE,MAAJ;AAAYD,QAAAA,CAAC,EAAE;AAAf,OAAD,CAAR;AACA,UAAIE,CAAC,GAAG,CAAC,GAAGD,CAAJ,CAAR;AACAC,MAAAA,CAAC,CAACC,IAAF,CAAOX,CAAP;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYK,CAAZ,EAZ+D,CAc/D;AAEA;;AAEA;;AAIA;;AACA;;;;;;AAOD,KA9BD;AA+BD;;AAED,SACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AACE,IAAA,aAAa,EAAEpC,aADjB;AAEE,IAAA,OAAO,EAAET,OAFX;AAGE,IAAA,aAAa,EAAEe,aAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAMGX,SAAS,CAACc,MAAV,IAAoBd,SAAS,CAAC2C,GAAV,CAAcC,IAAI,IACrC,oBAAC,IAAD;AACE,IAAA,GAAG,EAAEA,IAAI,CAACC,GADZ;AAEE,IAAA,GAAG,EAAED,IAAI,CAACC,GAFZ;AAGE,IAAA,QAAQ,EAAED,IAAI,CAAC1B,QAHjB;AAIE,IAAA,KAAK,EAAE0B,IAAI,CAACE,KAJd;AAKE,IAAA,IAAI,EAAEF,IAAI,CAAClD,IALb;AAME,IAAA,KAAK,EAAEkD,IAAI,CAACjD,KANd;AAOE,IAAA,IAAI,EAAEiD,IAAI,CAACG,IAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADmB,CANvB,CADF,CADF;AAuBD,CA1GD","sourcesContent":["import React from 'react'\r\nimport $ from 'jquery'\r\n\r\nimport config from '../../config'\r\nimport Post from './Post'\r\nimport NewPost from './NewPost'\r\nimport './master.css'\r\n\r\n\r\nexport default props => {\r\n  \r\n  const [newPost, setNewPost] = React.useState({body: '', image: ''})\r\n  const [posts, setPosts] = React.useState([])\r\n  const [postsData, setPostsData] = React.useState([])\r\n  const userInfos = props.userInfos\r\n\r\n  React.useEffect(() => {\r\n    getPosts()\r\n  }, [])\r\n\r\n  function handleNewPost(e) {\r\n    const {name, value} = e.target;\r\n\r\n    setNewPost({\r\n      ...newPost,\r\n      [name]: e.target.files ? e.target.files[0] : value\r\n    })\r\n  }\r\n\r\n  function handlePublish() {\r\n    if (Object.keys(newPost).length > 0) {\r\n      const form = new FormData()\r\n      form.append('image', newPost.image)\r\n      form.append('body', newPost.body)\r\n      form.append('username', userInfos.username)\r\n      form.append('owner', userInfos.firstName + ' ' + userInfos.lastName)\r\n      form.append('date', new Date())\r\n      \r\n      $.ajax({\r\n        url: `${config.api}/insertPost`,\r\n        method: 'post',\r\n        data: form,\r\n        cache: false,\r\n        contentType: false,\r\n        processData: false,\r\n        success: r => {\r\n          if (r.done) {\r\n            setNewPost({body: '', image: ''})\r\n            getPosts(1)\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  function getPosts(limit = 50, find = {}) {\r\n    console.log('Getting posts ...')\r\n\r\n    $.get(`${config.api}/getPosts`, {limit: limit, find: find}, r => {\r\n      let oldData = postsData\r\n\r\n      //let clonedData = [...postsData];\r\n      //clonedData.push(r.r)\r\n\r\n      //let x = [...r.data]\r\n      //console.log(x)\r\n      //x.push({d: 666})\r\n      let y = [{z: 124235, y: 345345}]\r\n      let x = [...z]\r\n      x.push(r)\r\n      console.log(x)\r\n\r\n      //clonedData.push(r.r);\r\n\r\n      // console.log(clonedData)\r\n  \r\n      /*setPostsData(clonedData[0])\r\n\r\n      console.log(clonedData[0])*/\r\n      \r\n      // Merge if needed the old data with the new\r\n      /*if (!oldData) oldData = r.r\r\n      else Array.prototype.unshift.apply(oldData, r.r)\r\n      \r\n      // Remove duplicates\r\n      oldData = [...new Set(oldData)]\r\n\r\n      setPostsData(oldData)*/\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"Home-Main\">\r\n      <div className=\"PostViewer\">\r\n        <NewPost \r\n          handleNewPost={handleNewPost} \r\n          newPost={newPost} \r\n          handlePublish={handlePublish} \r\n        />\r\n        {postsData.length && postsData.map(post => (\r\n          <Post \r\n            key={post._id} \r\n            _id={post._id} \r\n            username={post.username} \r\n            owner={post.owner} \r\n            body={post.body} \r\n            image={post.image} \r\n            date={post.date} \r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}