{"ast":null,"code":"import _slicedToArray from \"D:\\\\Programing\\\\react\\\\react-web\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Programing\\\\react\\\\react-web\\\\client\\\\src\\\\components\\\\Home\\\\Account\\\\index.js\";\nimport React from 'react';\nimport $ from 'jquery';\nimport config from '../../config';\nimport UserInfos from './UserInfos';\nimport Post from '../Main/Post';\nimport './master.css';\nexport default (props => {\n  const _React$useState = React.useState(),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        profile = _React$useState2[0],\n        setProfile = _React$useState2[1];\n\n  const _React$useState3 = React.useState(),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        postsData = _React$useState4[0],\n        setPostsData = _React$useState4[1];\n\n  const _React$useState5 = React.useState(),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        posts = _React$useState6[0],\n        setPosts = _React$useState6[1];\n\n  const userInfos = JSON.parse(localStorage.getItem('@react-web/userInfos'));\n  React.useEffect(() => {\n    getProfile();\n    getPosts();\n  }, []);\n\n  const getProfile = () => {\n    $.post(config.api + '/getUsers', {\n      username: userInfos.username\n    }, r => {\n      setProfile(r.r.map(data => React.createElement(UserInfos, {\n        key: data._id,\n        inf: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      })));\n    });\n  };\n\n  function mountPosts() {\n    var data = postsData.map(post => React.createElement(Post, {\n      key: post._id,\n      _id: post._id,\n      username: post.username,\n      owner: post.owner,\n      body: post.body,\n      image: post.image,\n      date: post.date,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }));\n    setPosts(data);\n  }\n\n  function getPosts(limit = 50, find = {}) {\n    console.log('Getting posts ...');\n    $.get(\"\".concat(config.api, \"/getPosts\"), {\n      limit: limit,\n      find: find\n    }, r => {\n      var oldData = postsData; // Merge if needed the old data with the new\n\n      if (!oldData) oldData = r.r;else Array.prototype.unshift.apply(oldData, r.r); // Remove duplicates\n\n      oldData = [...new Set(oldData)];\n      setPostsData(oldData);\n      mountPosts();\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Account\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, profile ? profile : null, React.createElement(Post, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }));\n});","map":{"version":3,"sources":["D:/Programing/react/react-web/client/src/components/Home/Account/index.js"],"names":["React","$","config","UserInfos","Post","props","useState","profile","setProfile","postsData","setPostsData","posts","setPosts","userInfos","JSON","parse","localStorage","getItem","useEffect","getProfile","getPosts","post","api","username","r","map","data","_id","mountPosts","owner","body","image","date","limit","find","console","log","get","oldData","Array","prototype","unshift","apply","Set"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport $ from 'jquery'\r\nimport config from '../../config'\r\nimport UserInfos from './UserInfos'\r\nimport Post from '../Main/Post'\r\nimport './master.css'\r\n\r\n\r\nexport default props => {\r\n\r\n  const [profile, setProfile] = React.useState();\r\n  const [postsData, setPostsData] = React.useState();\r\n  const [posts, setPosts] = React.useState();\r\n  const userInfos = JSON.parse(localStorage.getItem('@react-web/userInfos'));\r\n\r\n  React.useEffect(() => {\r\n    getProfile()\r\n    getPosts()\r\n  }, [])\r\n\r\n  const getProfile = () => {\r\n    $.post(config.api + '/getUsers', {username: userInfos.username}, r => {\r\n      setProfile(r.r.map(data => (<UserInfos key={data._id} inf={data} />)))\r\n    });\r\n  }\r\n\r\n  function mountPosts() {\r\n    var data = postsData.map(post => (\r\n      <Post key={post._id} _id={post._id} username={post.username} owner={post.owner} body={post.body} image={post.image} date={post.date} />\r\n    ))\r\n\r\n    setPosts(data)\r\n  }\r\n\r\n  function getPosts(limit = 50, find = {}) {\r\n    console.log('Getting posts ...')\r\n\r\n    $.get(`${config.api}/getPosts`, {limit: limit, find: find}, r => {\r\n      var oldData = postsData\r\n\r\n      // Merge if needed the old data with the new\r\n      if (!oldData) oldData = r.r\r\n      else Array.prototype.unshift.apply(oldData, r.r)\r\n      \r\n      // Remove duplicates\r\n      oldData = [...new Set(oldData)]\r\n\r\n      setPostsData(oldData)\r\n      mountPosts()\r\n    })\r\n  }\r\n  \r\n  return (\r\n    <div className=\"Account\">\r\n      {profile ? profile : null}\r\n      <Post />\r\n    </div>\r\n  );\r\n\r\n}"]},"metadata":{},"sourceType":"module"}